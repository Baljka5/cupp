{% extends "base.html" %}
{% load event_tags %}
{% load widget_tweaks %}

{% block header %}

{% endblock %}
{% block content %}
    <div class="content">
        <div class="row">
            <div class="col-md-12">
                <span><a href="/event-create" id="btn_save_and_new"
                         class="btn bg-purple ml-1">Add New Record</a></span><br><br>

                <div class="table-responsive">
                    <table id="bootstrapdatatable" class="table table-striped table-bordered" width="100%">
                        <thead>
                        <th><input type="checkbox" id="checkall"/></th>
                        <th>ID</th>
                        <th>Огноо</th>
                        <th>Store No</th>
                        <th>Store Name</th>
                        <th>Тайлбар</th>
                        <th>Ангилал</th>
                        <th>Үйл явдал</th>
                        <th>Хариуцагч</th>
                        <th>Edit</th>
                        {% if user.is_authenticated %}
                            {% is_in_event_group as user_in_event_group %}
                            {% if user.is_superuser %}
                                <th>Delete</th>
                            {% elif user_in_event_group %}

                            {% endif %}
                        {% endif %}
                        </thead>
                        <tbody>
                        {% for model in models %}
                            <tr>
                            <td><input type="checkbox" class="checkthis"/></td>
                            <td>{{ model.id }}</td>
                            <td>{{ model.date }}</td>
                            <td>{{ model.store_no }}</td>
                            <td>{{ model.store_name }}</td>
                            <td>{{ model.activ_desc }}</td>
                            <td>{{ model.activ_cat }}</td>
                            <td>{{ model.resp_action }}</td>
                            <td>{{ model.action_owner }}</td>
                            <td><a href="/event-edit/{{ model.id }}" class="btn btn-primary">Edit</a></td>
                            {% if user.is_authenticated %}
                                {% is_in_event_group as user_in_event_group %}
                                {% if user.is_superuser %}
                                    <td><a href="/event-delete/{{ model.id }}" class="btn btn-danger">Delete</a></td>
                                {% elif user_in_event_group %}

                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
        <script>
            $(document).ready(function () {
                $('#bootstrapdatatable').DataTable({
                        "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "All"]],
                        "iDisplayLength": 25
                    }
                );
            });
        </script>

    </div>{% endblock %}